groups:
- name: ContainerAvailability
  rules:
  
  # ==========================================================
  # REGRA √öNICA: Monitora a Queda do Cont√™iner Debian OU Ubuntu
  # ==========================================================
  - alert: TargetInativoCritico
    
    # A express√£o monitora qualquer alvo onde o job seja 'debian' OU 'ubuntu'
    # e que o estado seja 'down' (up == 0).
    expr: up{job=~"debian|ubuntu"} == 0
    
    # Espera 30 segundos para confirmar a indisponibilidade.
    for: 30s
    
    labels:
      severity: critical
      # service_name assume o valor do job que falhou (ser√° 'debian' ou 'ubuntu')
      service_name: "{{ $labels.job }}"
      # O r√≥tulo 'receiver' foi removido por ser redundante (o Alertmanager cuida do roteamento).
      
    annotations:
      summary: "üî¥ FALHA CR√çTICA: O servi√ßo '{{ $labels.job | toUpper }}' est√° inativo"
      description: | 
        O cont√™iner/servi√ßo **{{ $labels.job | toUpper }}** parou de responder. Isso indica que o cont√™iner pode ter parado ou o coletor de m√©tricas (Node Exporter) falhou internamente.
        
        **Gravidade:** {{ $labels.severity }}
        **Inst√¢ncia Afetada:** {{ $labels.instance }}